{"version":3,"sources":["../../src/payu/queries.js"],"names":["Q","require","base64","module","exports","payUUrlsMap","accountData","transactions","secureHash","encode","apiLogin","apiKey","getOrderById","orderId","deferred","defer","queries","headers","data","test","then","resp","Math","floor","statusCode","resolve","body","reject","catch","err","promise"],"mappings":";;AAAA;;AACA,IAAIA,IAAIC,QAAQ,GAAR,CAAR;AACA,IAAIC,SAASD,QAAQ,SAAR,CAAb;;AAEAE,OAAOC,OAAP,GAAiB,UAAUC,WAAV,EAAuBC,WAAvB,EAAoC;AACjD,QAAIC,eAAe,EAAnB;AACA,QAAIC,aAAaN,OAAOO,MAAP,CAAcH,YAAYI,QAAZ,GAAqB,GAArB,GAAyBJ,YAAYK,MAAnD,CAAjB;;AAEA;AACAJ,iBAAaK,YAAb,GAA4B,UAAUC,OAAV,EAAmB;AAC3C,YAAIC,WAAWd,EAAEe,KAAF,EAAf;AACA,sCAAY,MAAZ,EAAoBV,YAAYW,OAAhC,EAAyC;AACrCC,qBAAS;AACL,iCAAiB,WAAST;AADrB,aAD4B;AAIrCU,kBAAM;AACF,wBAAQZ,YAAYa,IADlB;AAEF,4BAAY,IAFV;AAGF,2BAAW,cAHT;AAIF,4BAAY;AACR,gCAAYb,YAAYI,QADhB;AAER,8BAAUJ,YAAYK;AAFd,iBAJV;AAQF,2BAAW;AACR,+BAAWE;AADH;AART;AAJ+B,SAAzC,EAgBGO,IAhBH,CAgBQ,UAAUC,IAAV,EAAgB;AACpB,gBAAIC,KAAKC,KAAL,CAAWF,KAAKG,UAAL,GAAgB,GAA3B,KAAmC,CAAvC,EAA0C;AACtCV,yBAASW,OAAT,CAAiBJ,KAAKK,IAAtB;AACA;AACH;AACDZ,qBAASa,MAAT,CAAgBN,IAAhB;AACH,SAtBD,EAsBGO,KAtBH,CAsBS,UAAUC,GAAV,EAAe;AACpBf,qBAASa,MAAT,CAAgBE,GAAhB;AACH,SAxBD;AAyBA,eAAOf,SAASgB,OAAhB;AACH,KA5BD;;AA8BA,WAAOvB,YAAP;AACH,CApCD","file":"queries.js","sourcesContent":["import { httpRequest } from '../services/httpRequest';\nvar Q = require('q');\nvar base64 = require('base-64');\n\nmodule.exports = function (payUUrlsMap, accountData) {\n    var transactions = {};\n    var secureHash = base64.encode(accountData.apiLogin+':'+accountData.apiKey);\n\n    // Ping\n    transactions.getOrderById = function (orderId) {\n        var deferred = Q.defer();\n        httpRequest('POST', payUUrlsMap.queries, {\n            headers: {\n                'Authorization': 'Basic '+secureHash\n            },\n            data: {\n                \"test\": accountData.test,\n                \"language\": \"en\",\n                \"command\": \"ORDER_DETAIL\",\n                \"merchant\": {\n                    \"apiLogin\": accountData.apiLogin,\n                    \"apiKey\": accountData.apiKey\n                },\n                \"details\": {\n                   \"orderId\": orderId\n                }\n             }\n        }).then(function (resp) {\n            if (Math.floor(resp.statusCode/100) == 2) {\n                deferred.resolve(resp.body);\n                return;\n            }\n            deferred.reject(resp);\n        }).catch(function (err) {\n            deferred.reject(err);\n        });\n        return deferred.promise;\n    }\n\n    return transactions;\n}"]}